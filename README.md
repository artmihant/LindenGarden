# LindenGarden

*"Из простых правил рождается бесконечная красота"*  
*— Аристид Линденмайер*

**Сад Линденмайера** - интерактивный инструмент для создания и визуализации L-систем с поддержкой **промежуточных состояний**.


## Что такое L-системы?

L-системы (Lindenmayer systems) - это математические системы, придуманные биологом Аристидом Линденмайером для моделирования роста растений и создания фракталов. Они описывают, как простые правила могут создавать сложные структуры.

### Классическая нотация:
- **F, A, B** - символы рисования (движение черепашки)
- **+ , -** - поворот влево/вправо
- **[ , ]** - сохранение/восстановление позиции (стек)

### Пример - Дерево Пифагора:
```
Аксиома: F
Правила: F → F[+F]F[-F]F  
Угол: 25°
```

## Непрерывные L-системы

**LindenGarden** реализует расширение классических L-систем - **дробные суффиксы**, позволяющие описывать промежуточные состояния между итерациями.

### Проблема
Классические L-системы дискретны - можно увидеть только состояния на итерациях 0, 1, 2, 3... Но что происходит между ними? Как выглядит система на итерации 2.3 или 1.7?

### Решение
Введение **дробных суффиксов** к символам:

```
F     → полный шаг (коэффициент 1.0)
F.5   → половина шага (коэффициент 0.5)  
F.25  → четверть шага (коэффициент 0.25)
+.7   → поворот на 70% от угла
-.3   → поворот на 30% от угла в обратную сторону
```

### Математическая основа

Для состояния на итерации `k + ε` (где `ε ∈ [0,1]`):

1. **Применяем правила** `k` раз (целая часть)
2. **Добавляем дробные суффиксы** согласно `ε`
3. **Отрисовываем** результирующую строку

#### Экстраполяция масштаба

Изначально кажется логичным использовать простые доли: для 30% шага по преобразованию символа `А` по правилу `A → BC` превратить его в `A.7B.3C.3`. Однако это приводит к **дергающейся анимации**.

**Причина:** L-системы имеют экспоненциальную природу роста. Для правила `A → AA` размер системы растет как `2^k`. На итерации 0.3 ожидается размер `2^0.3 ≈ 1.231`, но наивный подход `A.7A.3A.3` дает длину `1.3`.

Поэтому в нашем проекте используется **экспоненциальная интерполяция**:

```typescript
function partialApplyRules(rules: Rules, fracStep: number, power: number): Rules {
    const compStep = 1 - fracStep;
    fracStep = (power**fracStep - compStep) / power;
    
    // Теперь суффиксы обеспечивают гладкую экспоненциальную интерполяцию
}
```

Где:
- `power` - коэффициент роста системы (для `A → AA` это 2)
- `fracStep` - пересчитывается для сохранения экспоненциальной природы
- `compStep` - дополнительный коэффициент для баланса

В результате анимация становится плавной и математически корректной, поскольку учитывает истинную природу роста L-систем.

## Образовательная ценность

### Для преподавания математики:
- **Визуализация процесса** - ученики видят КАК растут фракталы
- **Понимание итераций** - что происходит на каждом шаге
- **Исследование** - "А что если изменить угол на 2.3 итерации?"
- **Красота математики** - сложные структуры из простых правил

### Интерактивные возможности:
- Создание собственных L-систем
- Анимация роста в реальном времени
- Настройка цветов и толщины линий
- Исследование промежуточных состояний

## Технические особенности

### Технологии:
- **Vue 3** + **TypeScript** - современная архитектура
- **Tailwind CSS** - минималистичный дизайн
- **Canvas API** - быстрая отрисовка
- **Vite** - мгновенная сборка

### Возможности:
- Настройка цветов и стилей для каждого символа
- Точное управление углами поворота
- Анимация между итерациями
- Сохранение и загрузка конфигураций
- Отзывчивый интерфейс

## Быстрый старт

```bash
# Клонирование репозитория
git clone https://github.com/yourusername/LindenGarden.git
cd LindenGarden

# Установка зависимостей
npm install

# Запуск dev-сервера
npm run dev

# Сборка для продакшн
npm run build
```

## Примеры использования

### Дерево Пифагора
```
Аксиома: Л
Правила: 
  Л → В[+Л]-Л
  В → ВВ
Угол: 45°
```

### Кривая Госпера
```
Аксиома: A
Правила:
  A → A-B--B+A++AA+B-
  B → +A-BB--B-A++A+B
Угол: 60°
```

### Снежинка Коха
```
Аксиома: F
Правила:
  F → F+F-F-F+F
Угол: 90°
```

## Математическая нотация

### Символы рисования:
- **Заглавные буквы** (A, B, F, L) - рисуют линию
- **Строчные буквы** (a, b, f, l) - перемещение без рисования

### Управление поворотами:
- **+** - поворот влево на заданный угол
- **-** - поворот вправо на заданный угол

### Стек позиций:
- **[** - сохранить текущую позицию и угол
- **]** - восстановить позицию и угол

### Дробные суффиксы (инновация):
- **F.5** - половина шага
- **+.25** - четверть поворота
- **A.75** - три четверти от стандартного действия

## Для исследователей

Если вы используете эту реализацию в научных работах, пожалуйста, укажите:

### Citation

```bibtex
@software{lindengarden2024,
    title={LindenGarden: Interactive L-system visualizer with fractional iterations},
    author={[Your Name]},
    year={2024},
    url={https://github.com/[yourusername]/LindenGarden},
    note={Interactive tool for continuous L-systems with exponential interpolation}
}
```

### Academic Reference

```
LindenGarden: Interactive L-system visualizer with fractional iterations.
Artem Antonov. 2024.
Available at: https://github.com/artmihant/LindenGarden
```

## Лицензия

MIT License - используйте свободно в образовательных и исследовательских целях.
